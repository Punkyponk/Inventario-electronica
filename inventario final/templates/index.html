<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inventario de Electrónica</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>

    <header>
        <h1>Gestión de Inventario de Electrónica</h1>
    </header>

    <section class="contenido">
        <!-- Tabla de productos en inventario -->
        <div class="tabla">
            <h2>Productos en Inventario</h2>
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nombre</th>
                        <th>Descripción</th>
                        <th>Cantidad</th>
                        <th>Estado</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    {% for producto in inventario %}
                    <tr>
                        <td>{{ producto.id }}</td>
                        <td>{{ producto.nombre }}</td>
                        <td>{{ producto.descripcion }}</td>
                        <td>{{ producto.cantidad }}</td>
                        <td>{{ producto.estado }}</td>
                        <td>
                            <!-- Formulario para eliminar cantidad de producto -->
                            <form action="{{ url_for('eliminar_producto', id=producto.id) }}" method="POST" style="display:inline;">
                                <label for="cantidad_eliminar_{{ producto.id }}">Cantidad a eliminar</label>
                                <input type="number" id="cantidad_eliminar_{{ producto.id }}" name="cantidad_eliminar" min="1" max="{{ producto.cantidad }}" required>
                                <button type="submit">Eliminar</button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

        <!-- Formulario para agregar producto -->
        <div class="formulario">
            <h2>Agregar Producto</h2>
            <form action="/agregar" method="POST">
                <label for="id_producto">ID del Producto</label>
                <input type="number" id="id_producto" name="id_producto" required>

                <label for="nombre">Nombre del Producto</label>
                <input type="text" id="nombre" name="nombre" required>

                <label for="descripcion">Descripción</label>
                <input type="text" id="descripcion" name="descripcion" required>

                <label for="cantidad">Cantidad a Agregar</label>
                <input type="number" id="cantidad" name="cantidad" required>

                <label for="estado">Estado</label>
                <select id="estado" name="estado" required>
                    <option value="bueno">Bueno</option>
                    <option value="malo">Malo</option>
                </select>

                <button type="submit">Agregar</button>
            </form>
        </div>

        <!-- Tabla de objetos retirados -->
        <div class="tabla">
            <h2>Objetos Retirados</h2>
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nombre</th>
                        <th>Fecha de Retiro</th> <!-- Nueva columna para la fecha de retiro -->
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    {% for producto in productos_prestados %}
                    <tr>
                        <td>{{ producto.id }}</td>
                        <td>{{ producto.nombre }}</td>
                        <td>{{ producto.fecha_retiro }}</td> <!-- Mostrar la fecha de retiro -->
                        <td>
                            <!-- Formulario para devolver producto -->
                            <form action="{{ url_for('devolver_producto', id=producto.id) }}" method="POST">
                                <label for="estado_devuelto_{{ producto.id }}">Estado</label>
                                <select id="estado_devuelto_{{ producto.id }}" name="estado_devuelto" required>
                                    <option value="bueno">Bueno</option>
                                    <option value="malo">Malo</option>
                                </select>
                                <button type="submit">Devolver</button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>

            <!-- Formulario para agregar producto a objetos retirados -->
            <h3>Solicitar Producto Prestado</h3>
            <form action="/retirar" method="POST">
                <label for="id_producto">ID del producto</label>
                <input type="number" id="id_producto" name="id_producto" required>
                <button type="submit">Pedir Prestado</button>
            </form>
        </div>

        <!-- Tabla de productos en mal estado -->
        <div class="tabla">
            <h2>Productos en Mal Estado</h2>
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Nombre</th>
                    </tr>
                </thead>
                <tbody>
                    {% for producto in productos_malos %}
                    <tr>
                        <td>{{ producto.id }}</td>
                        <td>{{ producto.nombre }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>

    </section>

</body>
</html>
